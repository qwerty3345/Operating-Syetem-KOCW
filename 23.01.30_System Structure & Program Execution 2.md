## ✅ 1/30 - System Structure & Program Execution 2

- CPU는 매 순간 메모리의 기계어를 읽어와서 실행한다.
    - 프로그램 카운터라는 레지스터가 가르키고 있는 부분의 메모리를 읽어와서 실행

### 동기식, 비동기식 입출력

- 동기식 입출력 (Synchronous I/O)
    - I/O 요청 후 입출력 작업이 완료된 후에야 제어가 사용자 프로그램에 넘어감
    - 구현 방법1
        - I/O 가 끝날 때까지 CPU를 낭비시킴
        - 매시점 하나의 I/O만 일어날 수 있음
    - 구현 방법2  (보통 이 방식으로 구현)
        - I/O 가 완료될 때 까지 해당 프로그램에게서 CPU 를 빼앗음
        - I/O 처리를 기다리는 줄에 그 프로그램을 줄세움
- 비동기식 입출력 (Asynchronous I/O)
    - I/O 가 시작된 후 입출력 작업이 끝나기를 기다리지 않고 제어가 사용자 프로그램에게 즉시 넘어감
- 동기식: 끝날 때 까지 기다리는 것, 비동기식: 기다리지 않고 다른 작업을 수행하는 것…
- 두 경우 모두 I/O 의 완료는 인터럽트로 알려줌
- 보통 Input, Read 작업은 Sync 하게 / Output, Write 작업은 Async 하게 구현하는 경우가 많음…
    - ex) CD 정보를 읽어와야 다음 작업을 할 수 있음… 프린터 출력은 요청해놓고 다른 일을 해도 됨…

### DMA

- Direct Memory Access
- 빠른 입출력 장치를 메모리에 가까운 속도로 처리하기 위해 사용
- CPU 의 중재 없이 `Device Controller`가 Device의 `buffer storage` 의 내용을 메모리에 블록 단위로 전송
![스크린샷 2023-01-30 오후 6 18 37 크게](https://user-images.githubusercontent.com/59835351/215442965-9d10c2cb-0c25-4c60-8817-a5e83f23d282.jpeg)


    

### 저장장치 계층 구조

- 위로 갈수록 빠르고, 비싸고, 휘발성임(Volatile)
- 해당 저장 장치 가장 위에는 CPU 가 있음
- CPU에서 직접 접근 가능함을 Primary (바이트 단위기에 접근 가능)
- CPU에서 직접 접근 불가능함을 Secondary 라고 함

![스크린샷 2023-01-30 오후 6 22 35 크게](https://user-images.githubusercontent.com/59835351/215443010-7072e068-5a78-4c21-8620-7a69cbea33ed.jpeg)


### 프로그램의 실행 (메모리 load)

- 우리가 보통 아는 코-데-힙-스 영역은 Virtual Memory 로 가상의 메모리 공간 영역임
    - 각 프로그램마다 가상의 메모리 공간이 존재함 (코드-데이터-스택…)
    ![스크린샷 2023-01-30 오후 6 27 56 크게](https://user-images.githubusercontent.com/59835351/215443031-df7b896f-16c0-4014-965f-a22f2484b9dc.jpeg)

    
- 그런 가상의 메모리 (Virtual Memory)를 실제 물리적인 메모리(Physical memory)에 올려서 실행
- “운영체제 커널” 도 결국은 하나의 데이터 영역이기에 코드-데이터-스택 같은 virtual memory 영역이 존재함
- 커널 주소 공간의 내용

### 함수 (function)
- 사용자 프로그램가 함수를 사용하는 것처럼, 커널도 함수를 사용한다
  - ![스크린샷 2023-01-30 오후 6 34 47 크게](https://user-images.githubusercontent.com/59835351/215443075-27550450-8009-451d-9280-55dbef8203cb.jpeg)
1. 사용자 정의 함수
    - 자신의 프로그램에서 정의한 함수
2. 라이브러리 함수
    - 누군가 만들어놓은, 가져다 쓰는 함수
3. 커널 함수
    - 운영체제 프로그램의 함수
    - **커널 함수의 호출 = 시스템 콜**

### 프로그램의 실행 단계

- 프로그램은 시작부터 종료까지… 유저모드와 커널모드를 반복하면서 실행됨
    - 해당 이미지는 해당 프로그램이 CPU를 가지고 있는 “동안만” 함축해서 표시함
        ![스크린샷 2023-01-30 오후 6 40 15 크게](https://user-images.githubusercontent.com/59835351/215443105-ffed4cf4-bda3-43e1-993d-aecc84df16c8.jpeg)
